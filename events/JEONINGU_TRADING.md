# Jeon Ingu Contrarian Trading - ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ ì—­ë°œìƒ íˆ¬ì ì‹œë®¬ë ˆì´í„°

> **ìë™í™”ëœ ìœ íŠœë¸Œ ë¶„ì„ ë° ì—­ë°œìƒ íˆ¬ì ì‹œë®¬ë ˆì´ì…˜ ì‹œìŠ¤í…œ**
>
> ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ ì±„ë„ì„ ëª¨ë‹ˆí„°ë§í•˜ê³ , AIë¡œ ë¶„ì„í•˜ì—¬, ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ë² íŒ…í•˜ëŠ” ì»¨íŠ¸ë¦¬ì–¸ ì „ëµì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
3. [ì‹œìŠ¤í…œ êµ¬ì¡°](#ì‹œìŠ¤í…œ-êµ¬ì¡°)
4. [ì„¤ì¹˜ ë°©ë²•](#ì„¤ì¹˜-ë°©ë²•)
5. [ì„¤ì • ê°€ì´ë“œ](#ì„¤ì •-ê°€ì´ë“œ)
6. [ì‚¬ìš© ë°©ë²•](#ì‚¬ìš©-ë°©ë²•)
7. [ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°](#ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°)
8. [ì›¹ ëŒ€ì‹œë³´ë“œ ì—°ë™](#ì›¹-ëŒ€ì‹œë³´ë“œ-ì—°ë™)
9. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ê°œìš”

### ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œë€?

[ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ](https://www.youtube.com/@ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ)ëŠ” ìœ íŠœë¸Œ ì±„ë„ë¡œ, í•œêµ­ ì£¼ì‹ì‹œì¥ê³¼ ê²½ì œ ë¶„ì„ ì½˜í…ì¸ ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### ì—­ë°œìƒ íˆ¬ì(Contrarian Investment)ë€?

**ì—­ë°œìƒ íˆ¬ì**ëŠ” ì‹œì¥ ì£¼ë¥˜ ì˜ê²¬ê³¼ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ë² íŒ…í•˜ëŠ” ì „ëµì…ë‹ˆë‹¤:

- **ìƒìŠ¹ ì˜ˆì¸¡ ì‹œ** â†’ í•˜ë½ì— ë² íŒ… (ì¸ë²„ìŠ¤ ETF)
- **í•˜ë½ ì˜ˆì¸¡ ì‹œ** â†’ ìƒìŠ¹ì— ë² íŒ… (ë ˆë²„ë¦¬ì§€ ETF)

### ì‹œìŠ¤í…œ ëª©ì 

ë³¸ ì‹œìŠ¤í…œì€:
1. ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œì˜ ì‹ ê·œ ì˜ìƒì„ ìë™ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§
2. Whisper APIë¡œ ìŒì„±ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜
3. GPT-5ë¡œ ì‹œì¥ ì „ë§ ë¶„ì„
4. ì—­ë°œìƒ íˆ¬ì ì „ëµ ìƒì„± (JSON í˜•ì‹)
5. í…”ë ˆê·¸ë¨ ì±„ë„ì— ìš”ì•½ ë©”ì‹œì§€ ë°œì†¡
6. **ì‹œë®¬ë ˆì´ì…˜ ë§¤ë§¤ ì‹¤í–‰ ë° SQLite ì´ë ¥ ì €ì¥**
7. ì›¹ ëŒ€ì‹œë³´ë“œë¥¼ í†µí•œ ì‹œê°í™”

âš ï¸ **ì‹¤ì œ ë§¤ë§¤ ì—°ë™ì´ ì•„ë‹Œ ì‹œë®¬ë ˆì´ì…˜**ì…ë‹ˆë‹¤. PRISM-INSIGHTì˜ ì‹¤ì œ ê³„ì¢Œì™€ ì´ë ¥ì´ ì„ì´ì§€ ì•Šë„ë¡ ë³„ë„ DBë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.

---

## ì£¼ìš” ê¸°ëŠ¥

### ğŸ¤– ìë™í™” ì›Œí¬í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Jeon Ingu Contrarian Trading                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. RSS Feed Monitoring                                     â”‚
â”‚     â””â”€ Detect new videos from ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ              â”‚
â”‚                                                              â”‚
â”‚  2. Audio Extraction (yt-dlp + FFmpeg)                      â”‚
â”‚     â””â”€ Download and extract audio as MP3                    â”‚
â”‚                                                              â”‚
â”‚  3. Transcription (OpenAI Whisper)                          â”‚
â”‚     â”œâ”€ Direct transcription (<25MB)                         â”‚
â”‚     â””â”€ Chunked transcription (>25MB, 10-min chunks)         â”‚
â”‚                                                              â”‚
â”‚  4. AI Analysis (GPT-5)                                     â”‚
â”‚     â”œâ”€ Content type detection (ë³¸ì¸ì˜ê²¬ vs ìŠ¤í‚µ)           â”‚
â”‚     â”œâ”€ Market sentiment analysis (ìƒìŠ¹/í•˜ë½/ì¤‘ë¦½)          â”‚
â”‚     â”œâ”€ Contrarian strategy generation                       â”‚
â”‚     â””â”€ Structured JSON output                               â”‚
â”‚                                                              â”‚
â”‚  5. Telegram Broadcasting                                   â”‚
â”‚     â””â”€ Send summary to Telegram channel                     â”‚
â”‚                                                              â”‚
â”‚  6. Simulated Trading Execution                             â”‚
â”‚     â”œâ”€ Calculate position size                              â”‚
â”‚     â”œâ”€ Execute BUY/SELL (simulated)                         â”‚
â”‚     â””â”€ Save to SQLite database                              â”‚
â”‚                                                              â”‚
â”‚  7. Performance Tracking                                    â”‚
â”‚     â”œâ”€ Calculate win rate, cumulative return                â”‚
â”‚     â””â”€ Export data for dashboard visualization              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š ë°ì´í„° ê´€ë¦¬

- **êµ¬ì¡°í™”ëœ JSON ì¶œë ¥**: Markdown ëŒ€ì‹  ì •í˜•í™”ëœ ë°ì´í„° ìƒì„±
- **SQLite ì˜ì†ì„±**: ì˜ìƒ, ë¶„ì„, ë§¤ë§¤ ì´ë ¥ ëª¨ë‘ DBì— ì €ì¥
- **í…”ë ˆê·¸ë¨ í†µí•©**: ìš”ì•½ ë©”ì‹œì§€ ìë™ ë°œì†¡
- **ëŒ€ì‹œë³´ë“œ ì—°ë™**: `examples/dashboard`ì—ì„œ ì‹œê°í™”

---

## ì‹œìŠ¤í…œ êµ¬ì¡°

### íŒŒì¼ êµ¬ì¡°

```
events/
â”œâ”€â”€ jeoningu_trading.py          # ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ jeoningu_trading_db.py       # SQLite ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
â”œâ”€â”€ JEONINGU_TRADING.md          # ë³¸ ë¬¸ì„œ
â”œâ”€â”€ jeoningu_trading.db          # SQLite ë°ì´í„°ë² ì´ìŠ¤ (ìë™ ìƒì„±)
â”œâ”€â”€ jeoningu_video_history.json  # ì˜ìƒ ì´ë ¥ (ìë™ ìƒì„±)
â”œâ”€â”€ jeoningu_YYYYMMDD.log        # ë¡œê·¸ íŒŒì¼ (ìë™ ìƒì„±)
â”œâ”€â”€ transcript_*.txt             # ìë§‰ íŒŒì¼ (ë””ë²„ê¹…ìš©)
â””â”€â”€ temp_audio.*                 # ì„ì‹œ ì˜¤ë””ì˜¤ íŒŒì¼ (ìë™ ì‚­ì œ)
```

### ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”

- **`videos`**: ë¶„ì„í•œ ì˜ìƒ ì •ë³´
- **`analysis_results`**: AI ë¶„ì„ ê²°ê³¼
- **`trades`**: ë§¤ìˆ˜/ë§¤ë„ ê±°ë˜ ì´ë ¥
- **`portfolio`**: í˜„ì¬ ë³´ìœ  ì¢…ëª©
- **`performance_metrics`**: ì„±ê³¼ ì§€í‘œ
- **`telegram_messages`**: ë°œì†¡í•œ í…”ë ˆê·¸ë¨ ë©”ì‹œì§€

ìì„¸í•œ ìŠ¤í‚¤ë§ˆëŠ” [ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°](#ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°) ì„¹ì…˜ ì°¸ì¡°.

---

## ì„¤ì¹˜ ë°©ë²•

### 1. ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­

#### Python 3.10+
```bash
python --version  # 3.10 ì´ìƒ í™•ì¸
```

#### FFmpeg (ì˜¤ë””ì˜¤ ì²˜ë¦¬ìš©)
```bash
# Ubuntu/Debian
sudo apt-get install ffmpeg

# macOS
brew install ffmpeg

# Rocky Linux/CentOS
sudo dnf install ffmpeg
```

### 2. Python íŒ¨í‚¤ì§€ ì„¤ì¹˜

í•„ìš”í•œ íŒ¨í‚¤ì§€ê°€ ì´ë¯¸ `requirements.txt`ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
```bash
pip install -r requirements.txt
```

ì£¼ìš” íŒ¨í‚¤ì§€:
- `openai`: Whisper API ë° GPT-5
- `yt-dlp`: YouTube ì˜¤ë””ì˜¤ ì¶”ì¶œ
- `feedparser`: RSS íŒŒì‹±
- `pydub`: ì˜¤ë””ì˜¤ íŒŒì¼ ë¶„í•  (>25MB íŒŒì¼ìš©)
- `aiosqlite`: ë¹„ë™ê¸° SQLite
- `python-telegram-bot`: í…”ë ˆê·¸ë¨ ì—°ë™
- `mcp-agent`: AI ì—ì´ì „íŠ¸ í”„ë ˆì„ì›Œí¬

### 3. ì„¤ì • íŒŒì¼ ì¤€ë¹„

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ:
```bash
# mcp_agent.secrets.yaml ì„¤ì •
cp mcp_agent.secrets.yaml.example mcp_agent.secrets.yaml
vi mcp_agent.secrets.yaml

# .env ì„¤ì • (í…”ë ˆê·¸ë¨ìš©)
cp .env.example .env
vi .env
```

---

## ì„¤ì • ê°€ì´ë“œ

### 1. OpenAI API Key ì„¤ì •

**íŒŒì¼**: `mcp_agent.secrets.yaml`

```yaml
openai:
  api_key: "sk-..." # ì‹¤ì œ OpenAI API í‚¤ ì…ë ¥
```

- OpenAI API í‚¤ëŠ” [OpenAI Platform](https://platform.openai.com/api-keys)ì—ì„œ ë°œê¸‰
- Whisper API ë° GPT-5 ì‚¬ìš©

### 2. Telegram ì„¤ì • (ì„ íƒì‚¬í•­)

**íŒŒì¼**: `.env`

```bash
# Telegram Bot Token (BotFatherì—ì„œ ë°œê¸‰)
TELEGRAM_BOT_TOKEN="123456789:ABCdefGHIjklMNOpqrsTUVwxyz"

# Telegram Channel ID (ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ì±„ë„)
TELEGRAM_CHANNEL_ID="-1001234567890"
```

í…”ë ˆê·¸ë¨ ë´‡ ìƒì„± ë°©ë²•:
1. Telegramì—ì„œ [@BotFather](https://t.me/BotFather) ì°¾ê¸°
2. `/newbot` ëª…ë ¹ìœ¼ë¡œ ë´‡ ìƒì„±
3. Bot Token ë³µì‚¬
4. ë´‡ì„ ì±„ë„ì— ì¶”ê°€í•˜ê³  ê´€ë¦¬ì ê¶Œí•œ ë¶€ì—¬
5. Channel ID í™•ì¸ (ë´‡ìœ¼ë¡œ ë©”ì‹œì§€ ë³´ë‚¸ í›„ `getUpdates` APIë¡œ í™•ì¸)

í…”ë ˆê·¸ë¨ ì‚¬ìš© ì•ˆ í•  ê²½ìš°:
```bash
python events/jeoningu_trading.py --no-telegram
```

### 3. MCP Agent ì„¤ì •

**íŒŒì¼**: `mcp_agent.config.yaml`

`reasoning_effort` ê°’ì„ í™•ì¸í•˜ì„¸ìš”:
```yaml
openai:
  default_model: gpt-5
  reasoning_effort: medium  # 'none'ì´ ì•„ë‹Œ 'low', 'medium', 'high' ì¤‘ í•˜ë‚˜
```

---

## ì‚¬ìš© ë°©ë²•

### ì¼ë°˜ ëª¨ë“œ (RSS ëª¨ë‹ˆí„°ë§)

ì‹ ê·œ ì˜ìƒì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  ì²˜ë¦¬:

```bash
python events/jeoningu_trading.py
```

**ì²« ì‹¤í–‰ ì‹œ**:
- ê¸°ì¡´ ì˜ìƒ ì´ë ¥ì„ ì´ˆê¸°í™”ë§Œ í•˜ê³  ì¢…ë£Œ
- ë‘ ë²ˆì§¸ ì‹¤í–‰ë¶€í„° ì‹ ê·œ ì˜ìƒ ê°ì§€ ë° ì²˜ë¦¬

**ë‘ ë²ˆì§¸ ì‹¤í–‰ë¶€í„°**:
- ì‹ ê·œ ì˜ìƒ ê°ì§€
- ì˜¤ë””ì˜¤ ì¶”ì¶œ â†’ ìë§‰ ë³€í™˜ â†’ AI ë¶„ì„ â†’ í…”ë ˆê·¸ë¨ ë°œì†¡ â†’ ì‹œë®¬ë ˆì´ì…˜ ë§¤ë§¤

### í…ŒìŠ¤íŠ¸ ëª¨ë“œ (íŠ¹ì • ì˜ìƒ URL)

íŠ¹ì • ì˜ìƒë§Œ ë¶„ì„:

```bash
python events/jeoningu_trading.py --video-url "https://www.youtube.com/watch?v=VIDEO_ID"
```

ì˜ˆì‹œ:
```bash
python events/jeoningu_trading.py --video-url "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
```

### í…”ë ˆê·¸ë¨ ë¹„í™œì„±í™”

í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ë°œì†¡ ê±´ë„ˆë›°ê¸°:

```bash
python events/jeoningu_trading.py --no-telegram
```

### Cron ìë™í™”

ë§¤ì¼ íŠ¹ì • ì‹œê°„ì— ìë™ ì‹¤í–‰:

```bash
# Crontab í¸ì§‘
crontab -e

# ë§¤ì¼ ì˜¤í›„ 6ì‹œì— ì‹¤í–‰
0 18 * * * cd /path/to/prism-insight && python events/jeoningu_trading.py >> events/cron.log 2>&1
```

---

## ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### ERD (Entity Relationship Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    videos     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ video_id (PK) â”‚
â”‚ title         â”‚
â”‚ published_dateâ”‚
â”‚ analyzed_date â”‚
â”‚ video_url     â”‚
â”‚ ...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1:N
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ analysis_results  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)           â”‚
â”‚ video_id (FK)     â”‚
â”‚ jeon_prediction   â”‚
â”‚ contrarian_strategyâ”‚
â”‚ target_stocks     â”‚
â”‚ confidence_score  â”‚
â”‚ ...               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ 1:N
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     trades        â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚   portfolio   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  1:1  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)           â”‚       â”‚ stock_code(PK)â”‚
â”‚ video_id (FK)     â”‚       â”‚ stock_name    â”‚
â”‚ analysis_id (FK)  â”‚       â”‚ buy_trade_id  â”‚
â”‚ stock_code        â”‚       â”‚ quantity      â”‚
â”‚ trade_type (BUY/  â”‚       â”‚ avg_buy_price â”‚
â”‚            SELL)  â”‚       â”‚ ...           â”‚
â”‚ quantity          â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ price             â”‚
â”‚ profit_loss       â”‚
â”‚ cumulative_return â”‚
â”‚ ...               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í…Œì´ë¸” ìƒì„¸

#### `videos` - ì˜ìƒ ì •ë³´
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `video_id` | TEXT (PK) | YouTube ì˜ìƒ ID |
| `title` | TEXT | ì˜ìƒ ì œëª© |
| `published_date` | TEXT | ê²Œì‹œ ë‚ ì§œ (ISO 8601) |
| `analyzed_date` | TEXT | ë¶„ì„ ë‚ ì§œ (ISO 8601) |
| `video_url` | TEXT | YouTube URL |
| `transcript_summary` | TEXT | ìë§‰ ìš”ì•½ |

#### `analysis_results` - AI ë¶„ì„ ê²°ê³¼
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `id` | INTEGER (PK) | ë¶„ì„ ID (ìë™ ì¦ê°€) |
| `video_id` | TEXT (FK) | ì˜ìƒ ID |
| `jeon_prediction` | TEXT | ì „ì¸êµ¬ ì˜ˆì¸¡ (ìƒìŠ¹/í•˜ë½/ì¤‘ë¦½) |
| `jeon_reasoning` | TEXT | ì˜ˆì¸¡ ê·¼ê±° |
| `contrarian_strategy` | TEXT | ì—­ë°œìƒ ì „ëµ (ë§¤ìˆ˜/ë§¤ë„/ê´€ë§) |
| `contrarian_reasoning` | TEXT | ì „ëµ ê·¼ê±° |
| `target_stocks` | TEXT (JSON) | ì¶”ì²œ ì¢…ëª© ë¦¬ìŠ¤íŠ¸ |
| `sentiment_score` | REAL | ê°ì • ì ìˆ˜ |
| `confidence_score` | REAL | ì‹ ë¢°ë„ (0.0~1.0) |
| `raw_analysis_json` | TEXT (JSON) | ì „ì²´ ë¶„ì„ ê²°ê³¼ JSON |

#### `trades` - ë§¤ë§¤ ì´ë ¥
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `id` | INTEGER (PK) | ê±°ë˜ ID (ìë™ ì¦ê°€) |
| `video_id` | TEXT (FK) | ê´€ë ¨ ì˜ìƒ ID |
| `analysis_id` | INTEGER (FK) | ë¶„ì„ ID |
| `stock_code` | TEXT | ì¢…ëª© ì½”ë“œ (6ìë¦¬) |
| `stock_name` | TEXT | ì¢…ëª©ëª… |
| `trade_type` | TEXT | BUY ë˜ëŠ” SELL |
| `trade_date` | TEXT | ê±°ë˜ ë‚ ì§œ (ISO 8601) |
| `quantity` | INTEGER | ìˆ˜ëŸ‰ |
| `price` | REAL | ê°€ê²© |
| `total_amount` | REAL | ì´ ê¸ˆì•¡ |
| `related_buy_id` | INTEGER | ê´€ë ¨ ë§¤ìˆ˜ ê±°ë˜ ID (ë§¤ë„ ì‹œ) |
| `profit_loss` | REAL | ì†ìµ ê¸ˆì•¡ |
| `profit_loss_rate` | REAL | ìˆ˜ìµë¥  (%) |
| `cumulative_return` | REAL | ëˆ„ì  ìˆ˜ìµë¥  (%) |
| `strategy_note` | TEXT | ì „ëµ ë©”ëª¨ |

#### `portfolio` - í˜„ì¬ ë³´ìœ  ì¢…ëª©
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `stock_code` | TEXT (PK) | ì¢…ëª© ì½”ë“œ |
| `stock_name` | TEXT | ì¢…ëª©ëª… |
| `buy_trade_id` | INTEGER (FK) | ë§¤ìˆ˜ ê±°ë˜ ID |
| `video_id` | TEXT (FK) | ê´€ë ¨ ì˜ìƒ ID |
| `quantity` | INTEGER | ë³´ìœ  ìˆ˜ëŸ‰ |
| `avg_buy_price` | REAL | í‰ê·  ë§¤ìˆ˜ê°€ |
| `total_investment` | REAL | ì´ íˆ¬ì ê¸ˆì•¡ |
| `buy_date` | TEXT | ë§¤ìˆ˜ ë‚ ì§œ |
| `strategy_note` | TEXT | ì „ëµ ë©”ëª¨ |

#### `performance_metrics` - ì„±ê³¼ ì§€í‘œ
| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `id` | INTEGER (PK) | ë©”íŠ¸ë¦­ ID |
| `calculation_date` | TEXT | ê³„ì‚° ë‚ ì§œ |
| `total_trades` | INTEGER | ì „ì²´ ê±°ë˜ ìˆ˜ |
| `winning_trades` | INTEGER | ìˆ˜ìµ ê±°ë˜ ìˆ˜ |
| `losing_trades` | INTEGER | ì†ì‹¤ ê±°ë˜ ìˆ˜ |
| `win_rate` | REAL | ìŠ¹ë¥  (%) |
| `cumulative_return` | REAL | ëˆ„ì  ìˆ˜ìµë¥  (%) |
| `avg_return_per_trade` | REAL | í‰ê·  ê±°ë˜ë‹¹ ìˆ˜ìµë¥  (%) |
| `max_drawdown` | REAL | ìµœëŒ€ ë‚™í­ (MDD) |
| `sharpe_ratio` | REAL | ìƒ¤í”„ ë¹„ìœ¨ |

### ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì˜ˆì‹œ

#### ì „ì²´ ê±°ë˜ ì´ë ¥ ì¡°íšŒ
```python
from events.jeoningu_trading_db import JeoninguTradingDB

db = JeoninguTradingDB()
await db.initialize()

# ìµœê·¼ 100ê°œ ê±°ë˜
trades = await db.get_trade_history(limit=100)
for trade in trades:
    print(f"{trade['trade_date']}: {trade['trade_type']} {trade['stock_name']} x {trade['quantity']}")
```

#### í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ì¡°íšŒ
```python
portfolio = await db.get_portfolio()
for position in portfolio:
    print(f"{position['stock_name']}: {position['quantity']}ì£¼ @ {position['avg_buy_price']}ì›")
```

#### ì„±ê³¼ ì§€í‘œ ê³„ì‚°
```python
metrics = await db.calculate_performance_metrics()
print(f"ìŠ¹ë¥ : {metrics['win_rate']:.1f}%")
print(f"ëˆ„ì  ìˆ˜ìµë¥ : {metrics['cumulative_return']:.2f}%")
```

---

## ì›¹ ëŒ€ì‹œë³´ë“œ ì—°ë™

### Dashboard ì´ë²¤íŠ¸ íƒ­ ì¶”ê°€ (ì˜ˆì •)

`examples/dashboard`ì˜ Next.js í”„ë¡ íŠ¸ì—”ë“œì— **ì´ë²¤íŠ¸ íƒ­**ì„ ì¶”ê°€í•˜ì—¬ ì‹œê°í™”:

#### êµ¬í˜„ ì˜ˆì • ê¸°ëŠ¥:
1. **ê±°ë˜ ì´ë ¥ í…Œì´ë¸”**: ë§¤ìˆ˜/ë§¤ë„ ì´ë ¥ì„ í‘œë¡œ í‘œì‹œ
2. **ìˆ˜ìµë¥  ì°¨íŠ¸**: ëˆ„ì  ìˆ˜ìµë¥  ì¶”ì´ ê·¸ë˜í”„
3. **ìŠ¹ë¥  ë¶„ì„**: ìŠ¹/íŒ¨ ë¹„ìœ¨, í‰ê·  ìˆ˜ìµë¥ 
4. **ì˜ìƒë³„ ì„±ê³¼**: ì–´ë–¤ ì˜ìƒì´ ê°€ì¥ ì¢‹ì€ ì„±ê³¼ë¥¼ ëƒˆëŠ”ì§€
5. **ì¢…ëª©ë³„ í†µê³„**: ì–´ë–¤ ì¢…ëª©ì´ ìì£¼ ê±°ë˜ë˜ì—ˆëŠ”ì§€

#### API ì—”ë“œí¬ì¸íŠ¸ (ë°±ì—”ë“œ ì¶”ê°€ í•„ìš”):
```python
# examples/dashboard/backend/api/jeoningu.py

@app.get("/api/jeoningu/trades")
async def get_trades(limit: int = 100):
    """Get recent trade history"""
    db = JeoninguTradingDB()
    trades = await db.get_trade_history(limit=limit)
    return {"trades": trades}

@app.get("/api/jeoningu/portfolio")
async def get_portfolio():
    """Get current portfolio"""
    db = JeoninguTradingDB()
    portfolio = await db.get_portfolio()
    return {"portfolio": portfolio}

@app.get("/api/jeoningu/performance")
async def get_performance():
    """Get performance metrics"""
    db = JeoninguTradingDB()
    metrics = await db.calculate_performance_metrics()
    return metrics
```

#### í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸ (React):
```tsx
// components/JeoninguEventTab.tsx
import { useQuery } from 'react-query';

export function JeoninguEventTab() {
  const { data: trades } = useQuery('jeoningu-trades', fetchTrades);
  const { data: metrics } = useQuery('jeoningu-performance', fetchPerformance);

  return (
    <div>
      <h2>ì „ì¸êµ¬ ì—­ë°œìƒ íˆ¬ì ì‹œë®¬ë ˆì´ì…˜</h2>

      {/* ì„±ê³¼ ìš”ì•½ */}
      <MetricsSummary metrics={metrics} />

      {/* ìˆ˜ìµë¥  ì°¨íŠ¸ */}
      <CumulativeReturnChart trades={trades} />

      {/* ê±°ë˜ ì´ë ¥ í…Œì´ë¸” */}
      <TradesTable trades={trades} />
    </div>
  );
}
```

---

## ë¬¸ì œ í•´ê²°

### 1. `pydub`ê°€ ì„¤ì¹˜ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**:
```
ImportError: pydub is not installed
```

**í•´ê²°**:
```bash
pip install pydub
```

FFmpegë„ í•¨ê»˜ ì„¤ì¹˜ í•„ìš”:
```bash
# Ubuntu/Debian
sudo apt-get install ffmpeg

# macOS
brew install ffmpeg
```

### 2. Whisper API 25MB ì œí•œ ì˜¤ë¥˜

**ì¦ìƒ**:
```
Error: File size exceeds 25MB limit
```

**í•´ê²°**:
- ìë™ìœ¼ë¡œ 10ë¶„ ì²­í¬ë¡œ ë¶„í• í•˜ì—¬ ì²˜ë¦¬
- `_transcribe_large_file()` ë©”ì„œë“œê°€ ìë™ ì²˜ë¦¬
- FFmpegê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨

### 3. Telegram ë©”ì‹œì§€ ë°œì†¡ ì‹¤íŒ¨

**ì¦ìƒ**:
```
Failed to send Telegram message
```

**í™•ì¸ ì‚¬í•­**:
1. `.env`ì— `TELEGRAM_BOT_TOKEN`ê³¼ `TELEGRAM_CHANNEL_ID` ì„¤ì • í™•ì¸
2. ë´‡ì´ ì±„ë„ì— ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì¶”ê°€ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
3. Channel IDê°€ `-100` ìœ¼ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸ (ìŠˆí¼ê·¸ë£¹ì˜ ê²½ìš°)

**ì„ì‹œ íšŒí”¼**:
```bash
python events/jeoningu_trading.py --no-telegram
```

### 4. JSON íŒŒì‹± ì—ëŸ¬

**ì¦ìƒ**:
```
Failed to parse JSON from LLM response
```

**ì›ì¸**:
- GPT-5ê°€ ê°€ë” JSONì„ ë§ˆí¬ë‹¤ìš´ ì½”ë“œë¸”ë¡ìœ¼ë¡œ ê°ì‹¸ì„œ ë°˜í™˜

**í•´ê²°**:
- ìŠ¤í¬ë¦½íŠ¸ì— ìë™ í´ë¦¬ë‹ ë¡œì§ í¬í•¨ë¨
- `result_clean = result.strip()` ë“±ìœ¼ë¡œ ì²˜ë¦¬

### 5. MCPApp context ì—ëŸ¬

**ì¦ìƒ**:
```
RuntimeError: No context available for OpenAIAugmentedLLM
```

**í•´ê²°**:
`mcp_agent.config.yaml` í™•ì¸:
```yaml
openai:
  reasoning_effort: medium  # 'none'ì´ ì•„ë‹Œ ê°’ìœ¼ë¡œ ì„¤ì •
```

### 6. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì•ˆ ë¨

**ì¦ìƒ**:
```
sqlite3.OperationalError: no such table: videos
```

**í•´ê²°**:
ì²« ì‹¤í–‰ ì‹œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì§€ë§Œ, ìˆ˜ë™ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ë ¤ë©´:
```bash
python -c "import asyncio; from events.jeoningu_trading_db import init_database; asyncio.run(init_database())"
```

### 7. ì˜ìƒì´ ê°ì§€ë˜ì§€ ì•ŠìŒ

**í™•ì¸ ì‚¬í•­**:
1. RSS URLì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸:
   ```python
   https://www.youtube.com/feeds/videos.xml?channel_id=UCznImSIaxZR7fdLCICLdgaQ
   ```
2. ì²« ì‹¤í–‰ í›„ ë‘ ë²ˆì§¸ ì‹¤í–‰ë¶€í„° ì‹ ê·œ ì˜ìƒ ê°ì§€ë¨
3. `jeoningu_video_history.json` íŒŒì¼ í™•ì¸

---

## ì¶”ê°€ ì •ë³´

### ì¶”ì²œ ì¢…ëª© ì½”ë“œ

#### ì¸ë²„ìŠ¤ ETF (í•˜ë½ ë² íŒ…)
- `114800`: KODEX ì¸ë²„ìŠ¤
- `252670`: TIGER ì¸ë²„ìŠ¤
- `251340`: KODEX ì½”ìŠ¤ë‹¥150 ì¸ë²„ìŠ¤

#### ë ˆë²„ë¦¬ì§€ ETF (ìƒìŠ¹ ë² íŒ…)
- `122630`: KODEX ë ˆë²„ë¦¬ì§€
- `233740`: TIGER ë ˆë²„ë¦¬ì§€
- `233160`: KODEX ì½”ìŠ¤ë‹¥150 ë ˆë²„ë¦¬ì§€

### ì°¸ê³  ìë£Œ

- [ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ YouTube ì±„ë„](https://www.youtube.com/@ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ)
- [OpenAI Whisper API ë¬¸ì„œ](https://platform.openai.com/docs/guides/speech-to-text)
- [yt-dlp GitHub](https://github.com/yt-dlp/yt-dlp)
- [python-telegram-bot ë¬¸ì„œ](https://docs.python-telegram-bot.org/)

### ë¼ì´ì„ ìŠ¤

ë³¸ ì‹œìŠ¤í…œì€ PRISM-INSIGHT í”„ë¡œì íŠ¸ì˜ ì¼ë¶€ë¡œ, ë™ì¼í•œ ë¼ì´ì„ ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

### ë©´ì±… ì¡°í•­

âš ï¸ **ë³¸ ì‹œìŠ¤í…œì€ êµìœ¡ ë° ì—°êµ¬ ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.**

- ì‹¤ì œ íˆ¬ì ê¶Œìœ ê°€ ì•„ë‹™ë‹ˆë‹¤
- ì—­ë°œìƒ ì „ëµì€ ë†’ì€ ë¦¬ìŠ¤í¬ë¥¼ ìˆ˜ë°˜í•©ë‹ˆë‹¤
- íˆ¬ì ê²°ì •ì€ ë³¸ì¸ì˜ íŒë‹¨ê³¼ ì±…ì„ í•˜ì— ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤
- ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ê°€ ì‹¤ì œ ìˆ˜ìµì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

---

**Version**: 2.0
**Last Updated**: 2025-11-23
**Maintainer**: PRISM-INSIGHT Development Team
